{"filter":false,"title":"stop.js","tooltip":"/javascript/stop.js","undoManager":{"mark":58,"position":58,"stack":[[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":1},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":2,"column":0},"end":{"row":80,"column":99},"action":"insert","lines":[" \"use strict\";"," ","window.addEventListener( \"DOMContentLoaded\" , ()=> {","    /**","     * @param watchCallBack 経過時間報告用コールバック","     * @param wrapCallBack ラップ報告用コールバック","     */","    const getStopWatch = function ( watchCallBack , wrapCallBack ){","        let accumulatedTime = 0,    // 積算時間","            currentTime=null,       // タイマー開示タイムスタンプ","            timerId=null;           // setInterval() の返り値"," ","            // リセット処理","        const reset = () =>{","            timerOff(); accumulatedTime = 0; currentTime=null;","                // リセットされたことをnullで通知","            watchCallBack( null ); wrapCallBack ( null );","        };","            // 開始処理","        const start = () =>{ currentTime = Date.now();timerOn(); };","            // 一時停止処理","        const pause = () =>{","                // これまでの経過時間を退避","            accumulatedTime = getNowTime();","            timerOff();","            currentTime = null;","        };","            // 再開処理","        const resume = () =>start();","            // ラップ報告処理","        const wrap = () =>wrapCallBack( getNowTime() );","            // 経過時間の算出","        const getNowTime = () =>accumulatedTime + Date.now() - currentTime;"," ","            // タイマー停止処理","        const timerOff = () => {","            if( timerId === null ) return;","            clearInterval(timerId);","            timerId = null;","        };","            // タイマー開始処理","        const timerOn = () => {","            if( timerId !== null ) clearTimeout(timerId);","            timerId = setInterval(()=>watchCallBack( getNowTime() ),10);","        };"," ","        reset();"," ","            // 必要な機能だけ返す","        return Object.freeze({","            start:()=> currentTime === null && accumulatedTime === 0 ?   start()  : reset(),","            pause:()=> currentTime === null ? ( accumulatedTime === 0 ? false : resume() ) : pause(),","            wrap:()=> currentTime === null ?  false : wrap(),","        });","    };"," ","        // ミリ秒を画面表示する形式に変換","    const timeString = time =>`${","        Math.floor(time / 60000).toString().padStart(2,\"00\")","    }:${","        Math.floor(time % 60000 / 1000).toString().padStart(2,\"00\")","    }.${","        Math.floor(time % 1000).toString().padStart(3,\"000\").slice(0,2)","    }`;"," ","    const watchArea = document.getElementById(\"watchArea\");","    const wrapArea = document.getElementById(\"wrapArea\");"," ","    const stopWatchObj = getStopWatch(","         time => watchArea.textContent = time === null ? \"00:00.00\" : timeString( time ) ,","         time => wrapArea.value = time === null ? \"\" : wrapArea.value + \"\\n\" + timeString( time )","    );"," ","    const buttonDefine = [","            { id:\"start\" , listener:()=>stopWatchObj.start() },","            { id:\"pause\" , listener:()=>stopWatchObj.pause() },","            { id:\"wrap\"  , listener:()=>stopWatchObj.wrap()  }","        ];","    buttonDefine.forEach( e => document.getElementById(e.id).addEventListener(\"click\",e.listener));"],"id":2}],[{"start":{"row":80,"column":99},"end":{"row":81,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":81,"column":4},"end":{"row":82,"column":1},"action":"insert","lines":["});"," "],"id":4},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""],"id":5},{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":14},"end":{"row":1,"column":1},"action":"remove","lines":[""," "],"id":6}],[{"start":{"row":18,"column":67},"end":{"row":18,"column":68},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":18,"column":68},"end":{"row":18,"column":77},"action":"insert","lines":["// 一時停止処理"],"id":8}],[{"start":{"row":19,"column":9},"end":{"row":19,"column":21},"action":"remove","lines":["   // 一時停止処理"],"id":9},{"start":{"row":19,"column":8},"end":{"row":19,"column":9},"action":"remove","lines":[" "]},{"start":{"row":19,"column":4},"end":{"row":19,"column":8},"action":"remove","lines":["    "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"remove","lines":["    "]},{"start":{"row":18,"column":77},"end":{"row":19,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":15,"column":57},"end":{"row":15,"column":58},"action":"insert","lines":[" "],"id":10}],[{"start":{"row":15,"column":58},"end":{"row":15,"column":65},"action":"insert","lines":["// 開始処理"],"id":11}],[{"start":{"row":17,"column":6},"end":{"row":17,"column":19},"action":"remove","lines":["      // 開始処理"],"id":12},{"start":{"row":17,"column":5},"end":{"row":17,"column":6},"action":"remove","lines":[" "]},{"start":{"row":17,"column":4},"end":{"row":17,"column":5},"action":"remove","lines":[" "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":4},"action":"remove","lines":["    "]},{"start":{"row":16,"column":10},"end":{"row":17,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":13,"column":62},"end":{"row":13,"column":63},"action":"insert","lines":[" "],"id":13}],[{"start":{"row":13,"column":63},"end":{"row":13,"column":83},"action":"insert","lines":["// リセットされたことをnullで通知"],"id":14}],[{"start":{"row":14,"column":14},"end":{"row":14,"column":36},"action":"remove","lines":["  // リセットされたことをnullで通知"],"id":15},{"start":{"row":14,"column":13},"end":{"row":14,"column":14},"action":"remove","lines":[" "]},{"start":{"row":14,"column":12},"end":{"row":14,"column":13},"action":"remove","lines":[" "]},{"start":{"row":14,"column":8},"end":{"row":14,"column":12},"action":"remove","lines":["    "]},{"start":{"row":14,"column":4},"end":{"row":14,"column":8},"action":"remove","lines":["    "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":4},"action":"remove","lines":["    "]},{"start":{"row":13,"column":83},"end":{"row":14,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"remove","lines":[" "],"id":16}],[{"start":{"row":17,"column":28},"end":{"row":17,"column":29},"action":"insert","lines":[" "],"id":17},{"start":{"row":17,"column":29},"end":{"row":17,"column":30},"action":"insert","lines":[" "]}],[{"start":{"row":17,"column":30},"end":{"row":17,"column":46},"action":"insert","lines":[" // これまでの経過時間を退避"],"id":18}],[{"start":{"row":18,"column":12},"end":{"row":18,"column":31},"action":"remove","lines":["    // これまでの経過時間を退避"],"id":19},{"start":{"row":18,"column":8},"end":{"row":18,"column":12},"action":"remove","lines":["    "]},{"start":{"row":18,"column":4},"end":{"row":18,"column":8},"action":"remove","lines":["    "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":4},"action":"remove","lines":["    "]},{"start":{"row":17,"column":46},"end":{"row":18,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":36},"end":{"row":23,"column":37},"action":"insert","lines":[" "],"id":20}],[{"start":{"row":23,"column":37},"end":{"row":23,"column":44},"action":"insert","lines":["// 再開処理"],"id":21}],[{"start":{"row":22,"column":11},"end":{"row":22,"column":19},"action":"remove","lines":[" // 再開処理"],"id":22},{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"remove","lines":[" "]},{"start":{"row":22,"column":9},"end":{"row":22,"column":10},"action":"remove","lines":[" "]},{"start":{"row":22,"column":8},"end":{"row":22,"column":9},"action":"remove","lines":[" "]},{"start":{"row":22,"column":4},"end":{"row":22,"column":8},"action":"remove","lines":["    "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"remove","lines":["    "]},{"start":{"row":21,"column":10},"end":{"row":22,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":17,"column":31},"end":{"row":17,"column":40},"action":"insert","lines":["// 一時停止処理"],"id":23}],[{"start":{"row":18,"column":43},"end":{"row":18,"column":44},"action":"insert","lines":[" "],"id":24}],[{"start":{"row":18,"column":44},"end":{"row":18,"column":59},"action":"insert","lines":["// これまでの経過時間を退避"],"id":25}],[{"start":{"row":17,"column":41},"end":{"row":17,"column":55},"action":"remove","lines":["/ これまでの経過時間を退避"],"id":26}],[{"start":{"row":16,"column":68},"end":{"row":16,"column":77},"action":"remove","lines":["// 一時停止処理"],"id":27}],[{"start":{"row":16,"column":68},"end":{"row":16,"column":75},"action":"insert","lines":["// 開始処理"],"id":28}],[{"start":{"row":14,"column":58},"end":{"row":14,"column":65},"action":"remove","lines":["// 開始処理"],"id":29}],[{"start":{"row":24,"column":55},"end":{"row":24,"column":56},"action":"insert","lines":[" "],"id":30}],[{"start":{"row":24,"column":56},"end":{"row":24,"column":66},"action":"insert","lines":["// ラップ報告処理"],"id":31}],[{"start":{"row":23,"column":11},"end":{"row":23,"column":22},"action":"remove","lines":[" // ラップ報告処理"],"id":32},{"start":{"row":23,"column":10},"end":{"row":23,"column":11},"action":"remove","lines":[" "]},{"start":{"row":23,"column":9},"end":{"row":23,"column":10},"action":"remove","lines":[" "]},{"start":{"row":23,"column":8},"end":{"row":23,"column":9},"action":"remove","lines":[" "]},{"start":{"row":23,"column":4},"end":{"row":23,"column":8},"action":"remove","lines":["    "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":4},"action":"remove","lines":["    "]},{"start":{"row":22,"column":44},"end":{"row":23,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":25,"column":75},"end":{"row":25,"column":76},"action":"insert","lines":[" "],"id":33}],[{"start":{"row":25,"column":76},"end":{"row":25,"column":87},"action":"insert","lines":[" // 経過時間の算出"],"id":34}],[{"start":{"row":24,"column":10},"end":{"row":24,"column":22},"action":"remove","lines":["  // 経過時間の算出"],"id":35},{"start":{"row":24,"column":9},"end":{"row":24,"column":10},"action":"remove","lines":[" "]},{"start":{"row":24,"column":8},"end":{"row":24,"column":9},"action":"remove","lines":[" "]},{"start":{"row":24,"column":4},"end":{"row":24,"column":8},"action":"remove","lines":["    "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"remove","lines":["    "]},{"start":{"row":23,"column":66},"end":{"row":24,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":27,"column":32},"end":{"row":27,"column":33},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":27,"column":33},"end":{"row":27,"column":44},"action":"insert","lines":["// タイマー停止処理"],"id":37}],[{"start":{"row":26,"column":12},"end":{"row":26,"column":23},"action":"remove","lines":["// タイマー停止処理"],"id":38},{"start":{"row":26,"column":8},"end":{"row":26,"column":12},"action":"remove","lines":["    "]},{"start":{"row":26,"column":4},"end":{"row":26,"column":8},"action":"remove","lines":["    "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"remove","lines":["    "]},{"start":{"row":25,"column":1},"end":{"row":26,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":32,"column":31},"end":{"row":32,"column":32},"action":"insert","lines":[" "],"id":39}],[{"start":{"row":32,"column":32},"end":{"row":32,"column":43},"action":"insert","lines":["// タイマー開始処理"],"id":40}],[{"start":{"row":31,"column":11},"end":{"row":31,"column":23},"action":"remove","lines":[" // タイマー開始処理"],"id":41}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":[" "],"id":42},{"start":{"row":24,"column":87},"end":{"row":25,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":30,"column":10},"end":{"row":30,"column":11},"action":"remove","lines":[" "],"id":43},{"start":{"row":30,"column":9},"end":{"row":30,"column":10},"action":"remove","lines":[" "]},{"start":{"row":30,"column":8},"end":{"row":30,"column":9},"action":"remove","lines":[" "]},{"start":{"row":30,"column":4},"end":{"row":30,"column":8},"action":"remove","lines":["    "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"remove","lines":["    "]},{"start":{"row":29,"column":10},"end":{"row":30,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":1},"action":"remove","lines":[" "],"id":44},{"start":{"row":33,"column":10},"end":{"row":34,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":37,"column":30},"end":{"row":37,"column":31},"action":"insert","lines":[" "],"id":45}],[{"start":{"row":37,"column":31},"end":{"row":37,"column":43},"action":"insert","lines":["// 必要な機能だけ返す"],"id":46}],[{"start":{"row":36,"column":10},"end":{"row":36,"column":24},"action":"remove","lines":["  // 必要な機能だけ返す"],"id":47},{"start":{"row":36,"column":9},"end":{"row":36,"column":10},"action":"remove","lines":[" "]},{"start":{"row":36,"column":8},"end":{"row":36,"column":9},"action":"remove","lines":[" "]},{"start":{"row":36,"column":4},"end":{"row":36,"column":8},"action":"remove","lines":["    "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":4},"action":"remove","lines":["    "]},{"start":{"row":35,"column":1},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":[" "],"id":48},{"start":{"row":53,"column":57},"end":{"row":54,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":58,"column":0},"end":{"row":58,"column":1},"action":"remove","lines":[" "],"id":49},{"start":{"row":57,"column":6},"end":{"row":58,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":23,"column":8},"end":{"row":23,"column":11},"action":"insert","lines":["// "],"id":50}],[{"start":{"row":39,"column":12},"end":{"row":39,"column":15},"action":"insert","lines":["// "],"id":51}],[{"start":{"row":23,"column":8},"end":{"row":23,"column":11},"action":"remove","lines":["// "],"id":54}],[{"start":{"row":39,"column":12},"end":{"row":39,"column":15},"action":"remove","lines":["// "],"id":55}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":3},"action":"insert","lines":["// "],"id":56},{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["// "]},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"insert","lines":["// "]},{"start":{"row":3,"column":0},"end":{"row":3,"column":3},"action":"insert","lines":["// "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":3},"action":"insert","lines":["// "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":3},"action":"insert","lines":["// "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":3},"action":"insert","lines":["// "]},{"start":{"row":7,"column":0},"end":{"row":7,"column":3},"action":"insert","lines":["// "]},{"start":{"row":8,"column":0},"end":{"row":8,"column":3},"action":"insert","lines":["// "]},{"start":{"row":9,"column":0},"end":{"row":9,"column":3},"action":"insert","lines":["// "]},{"start":{"row":11,"column":0},"end":{"row":11,"column":3},"action":"insert","lines":["// "]},{"start":{"row":12,"column":0},"end":{"row":12,"column":3},"action":"insert","lines":["// "]},{"start":{"row":13,"column":0},"end":{"row":13,"column":3},"action":"insert","lines":["// "]},{"start":{"row":14,"column":0},"end":{"row":14,"column":3},"action":"insert","lines":["// "]},{"start":{"row":15,"column":0},"end":{"row":15,"column":3},"action":"insert","lines":["// "]},{"start":{"row":16,"column":0},"end":{"row":16,"column":3},"action":"insert","lines":["// "]},{"start":{"row":17,"column":0},"end":{"row":17,"column":3},"action":"insert","lines":["// "]},{"start":{"row":18,"column":0},"end":{"row":18,"column":3},"action":"insert","lines":["// "]},{"start":{"row":19,"column":0},"end":{"row":19,"column":3},"action":"insert","lines":["// "]},{"start":{"row":20,"column":0},"end":{"row":20,"column":3},"action":"insert","lines":["// "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":3},"action":"insert","lines":["// "]},{"start":{"row":22,"column":0},"end":{"row":22,"column":3},"action":"insert","lines":["// "]},{"start":{"row":23,"column":0},"end":{"row":23,"column":3},"action":"insert","lines":["// "]},{"start":{"row":24,"column":0},"end":{"row":24,"column":3},"action":"insert","lines":["// "]},{"start":{"row":25,"column":0},"end":{"row":25,"column":3},"action":"insert","lines":["// "]},{"start":{"row":26,"column":0},"end":{"row":26,"column":3},"action":"insert","lines":["// "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":3},"action":"insert","lines":["// "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":3},"action":"insert","lines":["// "]},{"start":{"row":29,"column":0},"end":{"row":29,"column":3},"action":"insert","lines":["// "]},{"start":{"row":30,"column":0},"end":{"row":30,"column":3},"action":"insert","lines":["// "]},{"start":{"row":31,"column":0},"end":{"row":31,"column":3},"action":"insert","lines":["// "]},{"start":{"row":32,"column":0},"end":{"row":32,"column":3},"action":"insert","lines":["// "]},{"start":{"row":33,"column":0},"end":{"row":33,"column":3},"action":"insert","lines":["// "]},{"start":{"row":34,"column":0},"end":{"row":34,"column":3},"action":"insert","lines":["// "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":3},"action":"insert","lines":["// "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":3},"action":"insert","lines":["// "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":3},"action":"insert","lines":["// "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":3},"action":"insert","lines":["// "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":3},"action":"insert","lines":["// "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":3},"action":"insert","lines":["// "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":3},"action":"insert","lines":["// "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":3},"action":"insert","lines":["// "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":3},"action":"insert","lines":["// "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":3},"action":"insert","lines":["// "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":3},"action":"insert","lines":["// "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":3},"action":"insert","lines":["// "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":3},"action":"insert","lines":["// "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":3},"action":"insert","lines":["// "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"insert","lines":["// "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":3},"action":"insert","lines":["// "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":3},"action":"insert","lines":["// "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":3},"action":"insert","lines":["// "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":3},"action":"insert","lines":["// "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":3},"action":"insert","lines":["// "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":3},"action":"insert","lines":["// "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":3},"action":"insert","lines":["// "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":3},"action":"insert","lines":["// "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":3},"action":"insert","lines":["// "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":3},"action":"insert","lines":["// "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":3},"action":"insert","lines":["// "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":65,"column":1},"end":{"row":66,"column":0},"action":"insert","lines":["",""],"id":57},{"start":{"row":66,"column":0},"end":{"row":66,"column":1},"action":"insert","lines":[" "]},{"start":{"row":66,"column":1},"end":{"row":67,"column":0},"action":"insert","lines":["",""]},{"start":{"row":67,"column":0},"end":{"row":67,"column":1},"action":"insert","lines":[" "]},{"start":{"row":67,"column":1},"end":{"row":68,"column":0},"action":"insert","lines":["",""]},{"start":{"row":68,"column":0},"end":{"row":68,"column":1},"action":"insert","lines":[" "]}],[{"start":{"row":68,"column":1},"end":{"row":172,"column":0},"action":"insert","lines":["(function(){","    'use strict';","","    //htmlのidからデータを取得","    //取得したデータを変数に代入","","    var timer = document.getElementById('timer');","    var start = document.getElementById('start');","    var stop = document.getElementById('stop');","    var reset = document.getElementById('reset');","","    //クリック時の時間を保持するための変数定義","    var startTime;","","    //経過時刻を更新するための変数。 初めはだから0で初期化","    var elapsedTime = 0;","","    //タイマーを止めるにはclearTimeoutを使う必要があり、そのためにはclearTimeoutの引数に渡すためのタイマーのidが必要","    var timerId;","","    //タイマーをストップ -> 再開させたら0になってしまうのを避けるための変数。","    var timeToadd = 0;","","","    //ミリ秒の表示ではなく、分とか秒に直すための関数, 他のところからも呼び出すので別関数として作る","    //計算方法として135200ミリ秒経過したとしてそれを分とか秒に直すと -> 02:15:200","    function updateTimetText(){","","        //m(分) = 135200 / 60000ミリ秒で割った数の商　-> 2分","        var m = Math.floor(elapsedTime / 60000);","","        //s(秒) = 135200 % 60000ミリ秒で / 1000 (ミリ秒なので1000で割ってやる) -> 15秒","        var s = Math.floor(elapsedTime % 60000 / 1000);","","        //ms(ミリ秒) = 135200ミリ秒を % 1000ミリ秒で割った数の余り","        var ms = elapsedTime % 1000;","","","        //HTML 上で表示の際の桁数を固定する　例）3 => 03　、 12 -> 012","        //javascriptでは文字列数列を連結すると文字列になる","        //文字列の末尾2桁を表示したいのでsliceで負の値(-2)引数で渡してやる。","        m = ('0' + m).slice(-2); ","        s = ('0' + s).slice(-2);","        ms = ('0' + ms).slice(-3);","","        //HTMLのid　timer部分に表示させる　","        timer.textContent = m + ':' + s + ':' + ms;","    }","","","    //再帰的に使える用の関数","    function countUp(){","","        //timerId変数はsetTimeoutの返り値になるので代入する","        timerId = setTimeout(function(){","","            //経過時刻は現在時刻をミリ秒で示すDate.now()からstartを押した時の時刻(startTime)を引く","            elapsedTime = Date.now() - startTime + timeToadd;","            updateTimetText()","","            //countUp関数自身を呼ぶことで10ミリ秒毎に以下の計算を始める","            countUp();","","        //1秒以下の時間を表示するために10ミリ秒後に始めるよう宣言","        },10);","    }","","    //startボタンにクリック時のイベントを追加(タイマースタートイベント)","    start.addEventListener('click',function(){","","        //在時刻を示すDate.nowを代入","        startTime = Date.now();","","        //再帰的に使えるように関数を作る","        countUp();","    });","","    //stopボタンにクリック時のイベントを追加(タイマーストップイベント)","    stop.addEventListener('click',function(){","","        //タイマーを止めるにはclearTimeoutを使う必要があり、そのためにはclearTimeoutの引数に渡すためのタイマーのidが必要","       clearTimeout(timerId);","","","        //タイマーに表示される時間elapsedTimeが現在時刻かたスタートボタンを押した時刻を引いたものなので、","        //タイマーを再開させたら0になってしまう。elapsedTime = Date.now - startTime","        //それを回避するためには過去のスタート時間からストップ時間までの経過時間を足してあげなければならない。elapsedTime = Date.now - startTime + timeToadd (timeToadd = ストップを押した時刻(Date.now)から直近のスタート時刻(startTime)を引く)","       timeToadd += Date.now() - startTime;","    });","","    //resetボタンにクリック時のイベントを追加(タイマーリセットイベント)","    reset.addEventListener('click',function(){","","        //経過時刻を更新するための変数elapsedTimeを0にしてあげつつ、updateTimetTextで0になったタイムを表示。","        elapsedTime = 0;","","        //リセット時に0に初期化したいのでリセットを押した際に0を代入してあげる","        timeToadd = 0;","","        //updateTimetTextで0になったタイムを表示","        updateTimetText();","","    });","})();",""],"id":58}],[{"start":{"row":67,"column":1},"end":{"row":67,"column":14},"action":"insert","lines":["'use strict';"],"id":60}],[{"start":{"row":69,"column":4},"end":{"row":69,"column":7},"action":"insert","lines":["// "],"id":61}],[{"start":{"row":0,"column":0},"end":{"row":66,"column":1},"action":"remove","lines":["//  \"use strict\";","// window.addEventListener( \"DOMContentLoaded\" , ()=> {","//     /**","//      * @param watchCallBack 経過時間報告用コールバック","//      * @param wrapCallBack ラップ報告用コールバック","//      */","//     const getStopWatch = function ( watchCallBack , wrapCallBack ){","//         let accumulatedTime = 0,    // 積算時間","//             currentTime=null,       // タイマー開示タイムスタンプ","//             timerId=null;           // setInterval() の返り値","","//             // リセット処理","//         const reset = () =>{","//             timerOff(); accumulatedTime = 0; currentTime=null; // リセットされたことをnullで通知","//             watchCallBack( null ); wrapCallBack ( null ); ","//         };","//         const start = () =>{ currentTime = Date.now();timerOn(); }; // 開始処理","//         const pause = () =>{   // 一時停止処理/","//             accumulatedTime = getNowTime(); // これまでの経過時間を退避","//             timerOff();","//             currentTime = null;","//         };","//         const resume = () =>start(); // 再開処理","//         const wrap = () =>wrapCallBack( getNowTime() ); // ラップ報告処理","//         const getNowTime = () =>accumulatedTime + Date.now() - currentTime;  // 経過時間の算出","//         const timerOff = () => { // タイマー停止処理","//             if( timerId === null ) return;","//             clearInterval(timerId);","//             timerId = null;","//         };","//         const timerOn = () => { // タイマー開始処理","//             if( timerId !== null ) clearTimeout(timerId);","//             timerId = setInterval(()=>watchCallBack( getNowTime() ),10);","//         };","//         reset();"," ","//         return Object.freeze({ // 必要な機能だけ返す","//             start:()=> currentTime === null && accumulatedTime === 0 ?   start()  : reset(),","//             pause:()=> currentTime === null ? ( accumulatedTime === 0 ? false : resume() ) : pause(),","//             wrap:()=> currentTime === null ?  false : wrap(),","//         });","//     };"," ","//         // ミリ秒を画面表示する形式に変換","//     const timeString = time =>`${","//         Math.floor(time / 60000).toString().padStart(2,\"00\")","//     }:${","//         Math.floor(time % 60000 / 1000).toString().padStart(2,\"00\")","//     }.${","//         Math.floor(time % 1000).toString().padStart(3,\"000\").slice(0,2)","//     }`;"," ","//     const watchArea = document.getElementById(\"watchArea\");","//     const wrapArea = document.getElementById(\"wrapArea\");","//     const stopWatchObj = getStopWatch(","//          time => watchArea.textContent = time === null ? \"00:00.00\" : timeString( time ) ,","//          time => wrapArea.value = time === null ? \"\" : wrapArea.value + \"\\n\" + timeString( time )","//     );","//     const buttonDefine = [","//             { id:\"start\" , listener:()=>stopWatchObj.start() },","//             { id:\"pause\" , listener:()=>stopWatchObj.pause() },","//             { id:\"wrap\"  , listener:()=>stopWatchObj.wrap()  }","//         ];","//     buttonDefine.forEach( e => document.getElementById(e.id).addEventListener(\"click\",e.listener));","// });"," "," "],"id":62}]]},"ace":{"folds":[],"scrolltop":1140,"scrollleft":0,"selection":{"start":{"row":3,"column":20},"end":{"row":3,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":75,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1641987660385,"hash":"e06c621cb16a14fea8d8a979c09d1371270cfbbc"}